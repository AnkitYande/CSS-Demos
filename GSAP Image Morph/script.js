gsap.registerPlugin(MorphSVGPlugin);

// Svg clip paths taken from inspiration
const shapes = [
    "m49.7201 72.9774c299.6089-71.96988 612.0009-71.96988 911.6099 0 28.49 6 48.67 21.8201 48.67 48.6596v488.41c0 9.548-3.79 18.705-10.544 25.456-6.751 6.752-15.908 10.544-25.456 10.544h-937.0699c-4.7243 0-9.4022-.931-13.766-2.741s-8.3278-4.463-11.6652-7.807c-3.33729-3.344-5.98241-7.313-7.78394-11.68-1.80153-4.368-2.724096-9.047-2.71489-13.772v-488.41c0-26.8795 16.35003-42.0596 48.72003-48.6596z",
    "m1011.21 332.34c0-179.13-225.88-324.34012-504.5-324.34012s-504.4996 145.21012-504.4996 324.34012c0 41.06 11.87 80.34 33.53 116.49-23.627 51.487-35.8199063 107.481-35.74000988 164.13-.0000003 11.594 4.60482988 22.712 12.80170988 30.911 8.197 8.199 19.3148 12.806 30.9083 12.809h923.7796c11.594-.003 22.712-4.61 30.909-12.809 8.201-8.199 12.801-19.317 12.801-30.911.07-55.86-11.788-111.091-34.78-162 22.45-36.77 34.79-76.77 34.79-118.62z",
    "m967.41 637.804c-306.825-31.6-616.085-31.6-922.91 0-5.4953.565-11.0481-.027-16.301-1.737s-10.0896-4.501-14.199-8.193c-4.09434-3.689-7.36744-8.198-9.60701-13.233-2.23956-5.036-3.395558-10.486-3.39299-15.997v-532.2803c.00642-8.4525 2.73227-16.6786 7.7746-23.4623 5.0423-6.7837 12.1336-11.7651 20.2254-14.2077 5.3822-1.62 11.0469-2.0801 16.62-1.35 305.575 40.28 615.115 40.28 920.69 0 8.392-1.1143 16.92.4971 24.327 4.5967 7.407 4.0995 13.303 10.4704 16.813 18.1733 2.32 5.1037 3.52 10.6443 3.52 16.25v532.2803c-.01 8.313-2.66 16.408-7.55 23.129-4.892 6.72-11.784 11.722-19.69 14.291-5.259 1.71-10.818 2.303-16.32 1.74z",
    "m49.7201 72.9774c299.6089-71.96988 612.0009-71.96988 911.6099 0 28.49 6 48.67 21.8201 48.67 48.6596v488.41c0 9.548-3.79 18.705-10.544 25.456-6.751 6.752-15.908 10.544-25.456 10.544h-937.0699c-4.7243 0-9.4022-.931-13.766-2.741s-8.3278-4.463-11.6652-7.807c-3.33729-3.344-5.98241-7.313-7.78394-11.68-1.80153-4.368-2.724096-9.047-2.71489-13.772v-488.41c0-26.8795 16.35003-42.0596 48.72003-48.6596z",
    "m1004.91 166.675c-33.427-129.0798-190.757-197.6197-351.397-153.0897l-1.74.48c-95.574 27.0199-196.766 27.0199-292.34 0l-1.74-.48c-160.64-44.53-318 24-351.4 153.0897-14.53 56.09-3.27 114.38 27.29 166-30.56 51.64-41.82 109.92-27.29 166 33.43 129.08 190.76 197.63 351.4 153.1l1.74-.49c95.575-27.01 196.765-27.01 292.34 0l1.74.49c160.64 44.53 318-24 351.397-153.1 14.53-56.09 3.26-114.37-27.287-166 30.547-51.62 41.817-109.91 27.287-166z",
    "m986.16 67.0098-15.62-3.7099c-305.07-72.39986-622.85-72.39986-927.92 0l-15.62 3.7099c-7.4055 1.7619-14.0004 5.9699-18.71846 11.9437-4.71805 5.9737-7.283475 13.3641-7.28154 20.9763v521.8502c.00315 5.103 1.16081 10.139 3.38629 14.732 2.22549 4.592 5.46112 8.622 9.46461 11.786 4.0035 3.165 8.6711 5.383 13.6532 6.488 4.9822 1.105 10.1498 1.069 15.1159-.106 305.07-72.4 622.85-72.4 927.92 0 4.969 1.179 10.141 1.218 15.127.113s9.658-3.324 13.664-6.491c4.009-3.167 7.239-7.201 9.469-11.798 2.22-4.596 3.38-9.637 3.38-14.744v-521.8302c0-7.6145-2.57-15.0062-7.29-20.98s-11.322-10.1803-18.73-11.94z",
    "m76.2601 60.1699c1.0783-7.541 4.8402-14.4402 10.5952-19.4311 5.7551-4.9909 13.1171-7.7385 20.7347-7.7388 262.813 52.8101 533.507 52.8101 796.32 0 7.618.0003 14.98 2.7479 20.735 7.7388s9.517 11.8901 10.595 19.4311l36.11 252.3601 34.83 243.38c.64 4.489.31 9.064-.97 13.415s-3.48 8.377-6.449 11.803c-2.971 3.427-6.643 6.176-10.768 8.06-4.126 1.884-8.608 2.86-13.143 2.862-310.492 52.95-627.708 52.95-938.1999 0-4.5358 0-9.0185-.975-13.1446-2.859-4.1261-1.883-7.7991-4.632-10.7702-8.059s-5.17084-7.453-6.4502-11.805c-1.27936-4.351-1.60846-8.927-.96499-13.417l34.82999-243.38z"
];

const images = document.querySelectorAll(".slide-image");

let idx = 0;

function showSlide(newIndex) {

    // Morph the SVG path using gsap
    gsap.to("#morph-target", {
        duration: 1,
        morphSVG: shapes[newIndex],
        ease: "power2.inOut"
    });

    // Fade old image into new image
    const oldIndex = (newIndex - 1 + images.length) % images.length;

    const tl = gsap.timeline();
    tl.to(images[newIndex], {
        opacity: 1,
        duration: 0.5,
        ease: "power1.inOut"
    }, 0);
    tl.to(images[oldIndex], {
        opacity: 0,
        duration: 0.5,
        ease: "power1.inOut"
    }, 0.2); // Fade out the old one slightly after

}


document.getElementById("next").onclick = () => {
    idx = (idx + 1) % shapes.length;
    showSlide(idx);
};

document.getElementById("prev").onclick = () => {
    idx = (idx - 1 + shapes.length) % shapes.length;
    showSlide(idx);
};

// Initialize
showSlide(idx);
